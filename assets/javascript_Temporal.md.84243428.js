import{_ as a,c as s,o as e,Q as n}from"./chunks/framework.00751356.js";const l="/javascript-guide/assets/object-model.8b10112d.svg",o="/javascript-guide/assets/persistence-model.091afd89.svg",b=JSON.parse('{"title":"Temporal","description":"","frontmatter":{},"headers":[],"relativePath":"javascript/Temporal.md","filePath":"javascript/Temporal.md"}'),p={name:"javascript/Temporal.md"},t=n(`<h1 id="temporal" tabindex="-1">Temporal <a class="header-anchor" href="#temporal" aria-label="Permalink to &quot;Temporal&quot;">​</a></h1><h2 id="date问题" tabindex="-1"><code>Date</code>问题 <a class="header-anchor" href="#date问题" aria-label="Permalink to &quot;\`Date\`问题&quot;">​</a></h2><ul><li>不支持用户本地时间和 UTC 以外的时区</li><li>解析器行为不可靠，无法使用</li><li>Date 对象是可变的</li><li>DST 行为不可预测（夏时制 DST (Daylight Saving Time)，或称夏令时(Summer Time)是一种为节约能源而人为规定地方时间的制度。）</li><li>计算 api 笨拙</li><li>不支持非公历</li></ul><h2 id="时间相关概念" tabindex="-1">时间相关概念 <a class="header-anchor" href="#时间相关概念" aria-label="Permalink to &quot;时间相关概念&quot;">​</a></h2><p>精确时间</p><p>钟表时间</p><p>时区</p><p>夏令时</p><p>处理歧义</p><p>Unix 时间</p><p>ISO-8601</p><p>时间平衡</p><h2 id="使用" tabindex="-1">使用 <a class="header-anchor" href="#使用" aria-label="Permalink to &quot;使用&quot;">​</a></h2><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">npm install </span><span style="color:#F97583;">--</span><span style="color:#E1E4E8;">save proposal</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">temporal</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> { </span><span style="color:#79B8FF;">Temporal</span><span style="color:#E1E4E8;"> } </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">require</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;proposal-temporal&#39;</span><span style="color:#E1E4E8;">);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">npm install </span><span style="color:#D73A49;">--</span><span style="color:#24292E;">save proposal</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">temporal</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> { </span><span style="color:#005CC5;">Temporal</span><span style="color:#24292E;"> } </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">require</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;proposal-temporal&#39;</span><span style="color:#24292E;">);</span></span></code></pre></div><h2 id="api" tabindex="-1">API <a class="header-anchor" href="#api" aria-label="Permalink to &quot;API&quot;">​</a></h2><p>Temporal 的接口遵循惯例，使用以 &quot;Plain&quot; 开头的类型名（<code>Temporal.PlainDate</code>，<code>Temporal.PlainTime</code>，和 <code>Temporal.PlainDateTime</code>）表示没有与之关联时区的对象。 由于时区和夏令时的关系，在这种类型和精确时间类型（<code>Temporal.Instant</code> 和 <code>Temporal.ZonedDateTime</code>）之间转换可能存在歧义，Temporal API 允许开发者来配置如何解决这种歧义。</p><h3 id="temporal-now" tabindex="-1">Temporal.Now <a class="header-anchor" href="#temporal-now" aria-label="Permalink to &quot;Temporal.Now&quot;">​</a></h3><ul><li><code>Temporal.Now.instant()</code> - 获取自 Unix 时间以来的精确时间</li><li><code>Temporal.Now.timeZone()</code> - 获取当前系统时区</li><li><code>Temporal.Now.zonedDateTime(calendar)</code> - 以系统时区和给定的日期格式获取当前的日期时间</li><li><code>Temporal.Now.zonedDateTimeISO()</code> - 以系统时区和 ISO-8601 格式获取当前的日期时间</li><li><code>Temporal.Now.plainDate(calendar)</code> - 以系统时区和给定的日期格式获取当前的日期</li><li><code>Temporal.Now.plainDateISO()</code> - 以系统时区和 ISO-8601 格式获取当前的日期</li><li><code>Temporal.Now.plainTimeISO()</code> - 以系统时区和 ISO-8601 格式获取当前的时间</li><li><code>Temporal.Now.plainDateTime(calendar)</code> - 返回当前系统时区的日期/时间，返回对象不包含时区信息，因此不应该将其用于夏令时的时间推导上。</li><li><code>Temporal.Now.plainDateTimeISO()</code> - 与上面相同，但是返回 ISO-8601 格式的日期时间</li></ul><h4 id="语法" tabindex="-1">语法： <a class="header-anchor" href="#语法" aria-label="Permalink to &quot;语法：&quot;">​</a></h4><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">Temporal.Now.</span><span style="color:#B392F0;">zonedDateTimeISO</span><span style="color:#E1E4E8;">(timeZone: object </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> string </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> Temporal.Now.</span><span style="color:#B392F0;">timeZone</span><span style="color:#E1E4E8;">()) : Temporal.ZonedDateTime</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">Temporal.Now.</span><span style="color:#B392F0;">zonedDateTime</span><span style="color:#E1E4E8;">(calendar: object </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> string, timeZone: object </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> string </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> Temporal.Now.</span><span style="color:#B392F0;">timeZone</span><span style="color:#E1E4E8;">()) : Temporal.ZonedDateTime</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">Temporal.Now.</span><span style="color:#B392F0;">instant</span><span style="color:#E1E4E8;">() : Temporal.Instant</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">Temporal.Now.</span><span style="color:#B392F0;">timeZone</span><span style="color:#E1E4E8;">() : Temporal.TimeZone</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">Temporal.Now.</span><span style="color:#B392F0;">plainDateTimeISO</span><span style="color:#E1E4E8;">(timeZone: object </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> string </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> Temporal.Now.</span><span style="color:#B392F0;">timeZone</span><span style="color:#E1E4E8;">()) : Temporal.PlainDateTime</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">Temporal.Now.</span><span style="color:#B392F0;">plainDateTime</span><span style="color:#E1E4E8;">(calendar: object </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> string, timeZone: object </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> string </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> Temporal.Now.</span><span style="color:#B392F0;">timeZone</span><span style="color:#E1E4E8;">()) : Temporal.PlainDateTime</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">Temporal.Now.</span><span style="color:#B392F0;">plainDateISO</span><span style="color:#E1E4E8;">(timeZone: object </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> string </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> Temporal.Now.</span><span style="color:#B392F0;">timeZone</span><span style="color:#E1E4E8;">()) : Temporal.PlainDate</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">Temporal.Now.</span><span style="color:#B392F0;">plainDate</span><span style="color:#E1E4E8;">(calendar: object </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> string, timeZone: object </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> string </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> Temporal.Now.</span><span style="color:#B392F0;">timeZone</span><span style="color:#E1E4E8;">()) : Temporal.PlainDate</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">Temporal.Now.</span><span style="color:#B392F0;">plainTimeISO</span><span style="color:#E1E4E8;">(timeZone: object </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> string </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> Temporal.Now.</span><span style="color:#B392F0;">timeZone</span><span style="color:#E1E4E8;">()) : Temporal.PlainTime</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"></span>
<span class="line"><span style="color:#24292E;">Temporal.Now.</span><span style="color:#6F42C1;">zonedDateTimeISO</span><span style="color:#24292E;">(timeZone: object </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> string </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> Temporal.Now.</span><span style="color:#6F42C1;">timeZone</span><span style="color:#24292E;">()) : Temporal.ZonedDateTime</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">Temporal.Now.</span><span style="color:#6F42C1;">zonedDateTime</span><span style="color:#24292E;">(calendar: object </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> string, timeZone: object </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> string </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> Temporal.Now.</span><span style="color:#6F42C1;">timeZone</span><span style="color:#24292E;">()) : Temporal.ZonedDateTime</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">Temporal.Now.</span><span style="color:#6F42C1;">instant</span><span style="color:#24292E;">() : Temporal.Instant</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">Temporal.Now.</span><span style="color:#6F42C1;">timeZone</span><span style="color:#24292E;">() : Temporal.TimeZone</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">Temporal.Now.</span><span style="color:#6F42C1;">plainDateTimeISO</span><span style="color:#24292E;">(timeZone: object </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> string </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> Temporal.Now.</span><span style="color:#6F42C1;">timeZone</span><span style="color:#24292E;">()) : Temporal.PlainDateTime</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">Temporal.Now.</span><span style="color:#6F42C1;">plainDateTime</span><span style="color:#24292E;">(calendar: object </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> string, timeZone: object </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> string </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> Temporal.Now.</span><span style="color:#6F42C1;">timeZone</span><span style="color:#24292E;">()) : Temporal.PlainDateTime</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">Temporal.Now.</span><span style="color:#6F42C1;">plainDateISO</span><span style="color:#24292E;">(timeZone: object </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> string </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> Temporal.Now.</span><span style="color:#6F42C1;">timeZone</span><span style="color:#24292E;">()) : Temporal.PlainDate</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">Temporal.Now.</span><span style="color:#6F42C1;">plainDate</span><span style="color:#24292E;">(calendar: object </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> string, timeZone: object </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> string </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> Temporal.Now.</span><span style="color:#6F42C1;">timeZone</span><span style="color:#24292E;">()) : Temporal.PlainDate</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">Temporal.Now.</span><span style="color:#6F42C1;">plainTimeISO</span><span style="color:#24292E;">(timeZone: object </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> string </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> Temporal.Now.</span><span style="color:#6F42C1;">timeZone</span><span style="color:#24292E;">()) : Temporal.PlainTime</span></span></code></pre></div><p><strong>参数：</strong></p><ul><li><code>timeZone</code> 获取当前日期和时间的时区。TimeZone 对象，一个实现时区协议的对象，或者一个字符串。如果没有给出，将使用当前系统时区。</li><li><code>calendar</code> 日历系统获取当前日期和时间。</li></ul><h3 id="temporal-instant" tabindex="-1">Temporal.Instant <a class="header-anchor" href="#temporal-instant" aria-label="Permalink to &quot;Temporal.Instant&quot;">​</a></h3><p><code>Temporal.Instant</code> 代表一个固定的时间点（称为 <strong>&quot;精确时间&quot;</strong>），不考虑历法和地点，例如：UTC 时间 1969 年 7 月 20 日 20 时 17 分。</p><p>为了获得人类可读的时间表示，可以使用 <code>Temporal.TimeZone</code> 或 <code>Temporal.Calendar</code> 与 <code>Temporal.ZonedDateTime</code> 或 <code>Temporal.PlainDateTime</code> 相结合。</p><h3 id="temporal-zoneddatetime" tabindex="-1">Temporal.ZonedDateTime <a class="header-anchor" href="#temporal-zoneddatetime" aria-label="Permalink to &quot;Temporal.ZonedDateTime&quot;">​</a></h3><h3 id="temporal-plaindate" tabindex="-1">Temporal.PlainDate <a class="header-anchor" href="#temporal-plaindate" aria-label="Permalink to &quot;Temporal.PlainDate&quot;">​</a></h3><h3 id="temporal-plaintime" tabindex="-1">Temporal.PlainTime <a class="header-anchor" href="#temporal-plaintime" aria-label="Permalink to &quot;Temporal.PlainTime&quot;">​</a></h3><h3 id="temporal-plaindatetime" tabindex="-1">Temporal.PlainDateTime <a class="header-anchor" href="#temporal-plaindatetime" aria-label="Permalink to &quot;Temporal.PlainDateTime&quot;">​</a></h3><h3 id="temporal-plainyearmonth" tabindex="-1">Temporal.PlainYearMonth <a class="header-anchor" href="#temporal-plainyearmonth" aria-label="Permalink to &quot;Temporal.PlainYearMonth&quot;">​</a></h3><h3 id="temporal-plainmonthday" tabindex="-1">Temporal.PlainMonthDay <a class="header-anchor" href="#temporal-plainmonthday" aria-label="Permalink to &quot;Temporal.PlainMonthDay&quot;">​</a></h3><h3 id="temporal-duration" tabindex="-1">Temporal.Duration <a class="header-anchor" href="#temporal-duration" aria-label="Permalink to &quot;Temporal.Duration&quot;">​</a></h3><h3 id="temporal-timezone" tabindex="-1">Temporal.TimeZone <a class="header-anchor" href="#temporal-timezone" aria-label="Permalink to &quot;Temporal.TimeZone&quot;">​</a></h3><h3 id="temporal-calendar" tabindex="-1">Temporal.Calendar <a class="header-anchor" href="#temporal-calendar" aria-label="Permalink to &quot;Temporal.Calendar&quot;">​</a></h3><h2 id="对象关系" tabindex="-1">对象关系 <a class="header-anchor" href="#对象关系" aria-label="Permalink to &quot;对象关系&quot;">​</a></h2><p><img src="`+l+'" alt="img"></p><h2 id="字符串持久化" tabindex="-1">字符串持久化 <a class="header-anchor" href="#字符串持久化" aria-label="Permalink to &quot;字符串持久化&quot;">​</a></h2><p>为了持久性和互操作性，所有的 <code>Temporal</code> 类型都有一个字符串表示。类型和字符串之间的对应关系如下所示。</p><p><img src="'+o+'" alt="img"></p><h2 id="date-temporal" tabindex="-1">Date &amp; Temporal <a class="header-anchor" href="#date-temporal" aria-label="Permalink to &quot;Date &amp; Temporal&quot;">​</a></h2><h2 id="参考" tabindex="-1">参考 <a class="header-anchor" href="#参考" aria-label="Permalink to &quot;参考&quot;">​</a></h2><p><a href="https://maggiepint.com/2017/04/09/fixing-javascript-date-getting-started/" target="_blank" rel="noreferrer">https://maggiepint.com/2017/04/09/fixing-javascript-date-getting-started/</a></p><p><a href="https://tc39.es/proposal-temporal/docs/balancing.html" target="_blank" rel="noreferrer">https://tc39.es/proposal-temporal/docs/balancing.html</a></p><p><a href="https://tc39.es/proposal-temporal/docs/zh_CN/index.html" target="_blank" rel="noreferrer">https://tc39.es/proposal-temporal/docs/zh_CN/index.html</a></p><p><a href="https://github.com/tc39/proposal-temporal" target="_blank" rel="noreferrer">https://github.com/tc39/proposal-temporal</a></p><p><a href="https://tc39.es/proposal-temporal/docs/cookbook.html" target="_blank" rel="noreferrer">https://tc39.es/proposal-temporal/docs/cookbook.html</a></p><p><a href="https://tc39.es/proposal-temporal/docs/ambiguity.html" target="_blank" rel="noreferrer">https://tc39.es/proposal-temporal/docs/ambiguity.html</a></p><p><a href="https://tc39.es/proposal-temporal/docs/balancing.html" target="_blank" rel="noreferrer">https://tc39.es/proposal-temporal/docs/balancing.html</a></p>',48),r=[t];function c(i,m,d,E,y,h){return e(),s("div",null,r)}const u=a(p,[["render",c]]);export{b as __pageData,u as default};
